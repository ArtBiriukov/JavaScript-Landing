(()=>{"use strict";var e=/^[а-яё]{2,}$/i,t=/[а-яё\s\!\.\,\?\:\;\(\)]+$/gi,n=/^\w+@\w+\.\w{2,}$/,r=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/;const a=function(e){var t=e.target,n=/^(\s*\-*)*/g,r=/[\s*\-*]*$/g,a=function(){t.value=t.value.replace(n,""),t.value=t.value.replace(r,"")};"user_name"===t.name&&(a(),t.value=t.value.replace(/( |^)[а-яёa-z]/g,(function(e){return e.toUpperCase()}))),"user_message"===t.name&&(a(),t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/\-+/g,"-")),t.matches(".form-email")&&(a(),t.value=t.value.replace(/@+/g,"@"),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/\.+/g,".")),t.matches(".form-phone")&&(a(),t.value=t.value.replace(/\++/g,"+"),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/\(+/g,"("),t.value=t.value.replace(/\)+/g,")"))};function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",n=document.querySelectorAll(e);function r(e){var n=e.keyCode,r=t,a=r.replace(/\D/g,""),o=this.value.replace(/\D/g,""),c=0,l=r.replace(/[_\d]/g,(function(e){return c<o.length?o.charAt(c++)||a.charAt(c):e}));-1!=(c=l.indexOf("_"))&&(l=l.slice(0,c));var u=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(u=new RegExp("^"+u+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}var a,c=o(n);try{for(c.s();!(a=c.n()).done;){var l=a.value;l.addEventListener("input",r),l.addEventListener("focus",r),l.addEventListener("blur",r)}}catch(e){c.e(e)}finally{c.f()}}const u=l;l("селектор элементов","маска, если маску не передать то будет работать стандартная +7 (___) ___-__-__");var i,s,d,v,f;f=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;(t.matches("ul>li>a, .close-btn")||t.closest(".menu")||!(t=t.closest("menu"))&&f.classList.contains("active-menu"))&&f.classList.toggle("active-menu")})),i=document.querySelector(".popup"),s=document.querySelectorAll(".popup-btn"),d=document.querySelector(".popup-content"),v=function(){if(document.documentElement.clientWidth<=768)i.style.display="block";else{var e=null;window.requestAnimationFrame((function t(n){e||(e=n);var r=n-e;i.style.display="block",d.style.left=r/6+"%",r<240&&window.requestAnimationFrame(t)}))}},s.forEach((function(e){e.addEventListener("click",v)})),i.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(i.style.display="none",d.style.left="0"):(t=t.closest(".popup-content"))||(i.style.display="none",d.style.left="0")}));var m,p,h,g,y,b,L,E,S,q,_,A,w=document.querySelector("menu").querySelectorAll("ul>li>a"),k=document.querySelector('a[href="#service-block"]'),x=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href");document.querySelector(""+t).scrollIntoView({behavior:"smooth",block:"start"})};w.forEach((function(e){e.addEventListener("click",x)})),k.addEventListener("click",x),q=document.querySelector(".service-header"),_=q.querySelectorAll(".service-header-tab"),A=document.querySelectorAll(".service-tab"),q.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&_.forEach((function(e,n){e===t&&function(e){for(var t=0;t<A.length;t++)e===t?(_[t].classList.add("active"),A[t].classList.remove("d-none")):(_[t].classList.remove("active"),A[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");t.insertAdjacentHTML("beforeend",'<li class="dot dot-active"></li>');for(var n=0;n<e.length-1;n++)t.insertAdjacentHTML("beforeend",'<li class="dot"></li>')}(),p=document.querySelectorAll(".portfolio-item"),h=document.querySelectorAll(".dot"),g=document.querySelector(".portfolio-content"),y=0,b=function(e,t,n){e[t].classList.remove(n)},L=function(e,t,n){e[t].classList.add(n)},E=function(){b(p,y,"portfolio-item-active"),b(h,y,"dot-active"),++y>=p.length&&(y=0),L(p,y,"portfolio-item-active"),L(h,y,"dot-active")},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;m=setInterval(E,e)},g.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(b(p,y,"portfolio-item-active"),b(h,y,"dot-active"),t.matches("#arrow-right")?y++:t.matches("#arrow-left")?y--:t.matches(".dot")&&h.forEach((function(e,n){e===t&&(y=n)})),y>=p.length&&(y=0),y<0&&(y=p.length-1),L(p,y,"portfolio-item-active"),L(h,y,"dot-active"))})),g.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(m)})),g.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&S()})),S(1500);var I=document.querySelectorAll(".command__photo");I.forEach((function(e,t){e.addEventListener("mouseenter",(function(e){e.target===I[t]&&(e.target.dataset.firstImg=I[t].src,I[t].src=e.target.dataset.img)})),e.addEventListener("mouseout",(function(e){e.target===I[t]&&(I[t].src=e.target.dataset.firstImg)}))})),document.querySelector(".calc-block").querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d]/g,"")}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),o=document.querySelector(".calc-count"),c=document.getElementById("total");t.addEventListener("change",(function(t){var l,u,i,s,d,v,f,m=t.target;m!==n&&m!==r&&m!==a&&m!==o||(i=0,s=1,d=1,v=n.options[n.selectedIndex].value,f=r.value,v||(o.value="",r.value="",a.value="",i=0),o.value>1&&(s+=(o.value-1)/10),a.value&&a.value<5?d*=2:a.value&&a.value<10&&(d*=1.5),v&&f&&(i=parseInt(e*v*f*s*d)),0,l=i,1e3,u=null,window.requestAnimationFrame((function e(t){u||(u=t);var n=Math.min((t-u)/1e3,1);c.textContent=Math.floor(n*(l+0)+0),n<1&&window.requestAnimationFrame(e)})))}))}(100),function(){var o="Ваши данные у нас ))",c=document.createElement("div");c.classList.add("animate__animated"),c.style.cssText="\n    font-size: 2rem;\n    background-color: steelblue;\n    width: 230px;\n    padding: 10px;\n    border: 2px solid burlywood;\n    border-radius: 25px;\n    margin: 10px auto;\n  ";var l=function(e){e.forEach((function(e){e.value="",e.classList.remove("success"),e.classList.remove("error")}))},i=function(){document.querySelector(".popup").style.display="none",c.remove()},s=function(s){var d=document.getElementById(s);d.querySelectorAll("input").forEach((function(o){o.addEventListener("input",(function(a){var o,c,l;o=a.target,c=function(){o.classList.add("success"),o.classList.remove("error")},l=function(){o.classList.add("error"),o.classList.remove("success")},"user_name"===o.name&&(o.value=o.value.replace(/[a-z\s]*/gi,""),e.test(o.value)?c():l()),"user_message"===o.name&&(t.test(o.value)?c():l()),o.matches(".form-email")&&(n.test(o.value)?c():l()),o.matches(".form-phone")&&(o.value=o.value.replace(/[^\d\+\-\s\(\)]+/g,""),r.test(o.value)?c():l())})),o.addEventListener("blur",a)})),u(".form-phone"),d.addEventListener("submit",(function(e){var t,n=e.target,r=n.querySelectorAll("input");if(e.preventDefault(),t=!0,r.forEach((function(e){""!==e.value?e.classList.contains("error")&&(t=!1):t=!1})),t){n.appendChild(c),c.classList.add("animate__backInRight"),c.textContent="Загрузка ...";var a=new FormData(n),u={};a.forEach((function(e,t){u[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"contant-Type":"application/json"},body:JSON.stringify(e)})}(u).then((function(e){if(200!==e.status)throw new Error("status not 200");c.style.display="block",c.textContent=o,l(r),setTimeout(i,3e3)})).catch((function(e){c.style.display="block",o.textContent="Что то не то",l(r),setTimeout(i,3e3),console.log(e)}))}}))};s("form1"),s("form2"),s("form3")}()})();